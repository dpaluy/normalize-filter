require File.expand_path(File.join('.', 'spec_helper'), File.dirname(__FILE__))
require 'group_array'

describe GroupArray, "with time ordered two dimmension array" do
  
  DATA = [
    ['09:00:27.141', '5410.24'],
    ['09:00:27.877', '5410.24'],
    ['09:00:28.176', '5410.24'],
    ['09:00:28.749', '5410.24'],
    ['09:00:29.139', '5411.31'],
    ['09:00:29.616', '5411.31'],
    ['09:00:30.142', '5411.3'],
    ['09:00:31.047', '5411.3'],
    ['09:00:31.215', '5411.3'],
    ['09:00:31.834', '5411.3'],
    ['09:00:32.089', '5412.18'],
    ['09:00:32.682', '5412.18'],
    ['09:00:33.155', '5411.93'],
    ['09:00:33.825', '5411.93'],
    ['09:00:34.189', '5413'],
    ['09:00:34.815', '5413'],
    ['09:00:35.156', '5413'],
    ['09:00:46.150', '5411.7'],
    ['09:00:46.682', '5411.7'],
    ['09:00:47.194', '5411.7'],
    ['09:00:48.253', '5411.7'],
    ['09:00:48.753', '5411.7'],
    ['09:00:49.131', '5411.62'],
    ['09:00:49.683', '5411.62'],
    ['09:00:50.120', '5411.68'],
    ['09:00:50.616', '5411.68'],
    ['09:00:51.104', '5411.68'],
    ['09:00:52.175', '5411.68'],
    ['09:00:52.963', '5411.68'],
    ['09:00:53.190', '5411.75'],
    ['09:00:53.792', '5411.75'],
    ['09:00:54.225', '5411.75'],
    ['09:00:54.886', '5411.75'],
    ['09:00:55.176', '5411.51'],
    ['09:00:55.984', '5411.51'],
    ['09:00:56.136', '5411.51'],
    ['09:00:57.197', '5411.55'],
    ['09:00:57.851', '5411.55'],
    ['09:00:58.148', '5411.55'],
    ['09:00:59.160', '5411.36'],
    ['09:00:59.882', '5411.36'],
    ['09:01:00.147', '5411.28'],
    ['09:01:01.294', '5411.28'],
    ['09:01:01.881', '5411.28'],
    ['09:01:02.178', '5410.76'],
    ['09:01:02.751', '5410.76'],
    ['09:01:03.972', '5410.76'],
    ['09:01:04.467', '5410.76'],
    ['09:01:04.574', '5410.76'],
    ['09:01:05.057', '5410.76'],
    ['09:01:05.478', '5411.17'],
    ['09:01:06.795', '5411.17'],
    ['09:01:07.578', '5411.17'],
    ['09:01:08.029', '5411.15'],
    ['09:01:08.558', '5411.15'],
    ['09:01:08.849', '5411.25'],
    ['09:01:09.316', '5411.25'],
    ['09:01:09.784', '5411.25'],
    ['09:01:10.365', '5411.25'],
    ['09:01:10.451', '5411.25'],
    ['09:01:11.209', '5411.25'],
    ['09:01:12.188', '5411.25'],
    ['09:01:12.798', '5411.25'],
    ['09:01:13.217', '5411.25'],
    ['09:01:14.031', '5411.25'],
    ['09:01:14.128', '5411.19'],
    ['09:01:14.801', '5411.19'],
    ['09:01:15.170', '5411.19'],
    ['09:01:16.139', '5411.19'],
    ['09:01:16.174', '5411.19'],
    ['09:01:16.833', '5411.19'],
    ['09:01:17.208', '5411.19'],
    ['09:01:17.819', '5411.19'],
    ['09:01:18.187', '5411.19'],
    ['09:01:18.721', '5411.19'],
    ['09:01:19.128', '5411.21'],
    ['09:01:20.097', '5410.66'],
    ['09:01:20.698', '5410.66'],
    ['09:01:21.131', '5410.66'],
    ['09:01:22.072', '5410.08'],
    ['09:01:22.880', '5410.08'],
    ['09:01:23.166', '5410.08'],
    ['09:01:24.098', '5410.02'],
    ['09:01:25.091', '5410.02'],
    ['09:01:25.761', '5410.02'],
    ['09:01:26.172', '5410.4'],
    ['09:01:26.703', '5410.4'],
    ['09:01:27.110', '5410.4'],
    ['09:01:28.142', '5410.4'],
    ['09:01:29.114', '5410.4'],
    ['09:01:30.139', '5410.4'],
    ['09:01:31.108', '5410.4'],
    ['09:01:31.666', '5410.4'],
    ['09:01:32.121', '5410.4'],
    ['09:01:48.143', '5409.28'],
    ['09:01:48.768', '5409.28'],
    ['09:01:49.119', '5410.29'],
    ['09:01:49.833', '5410.29'],
    ['09:01:50.195', '5410.29'],
    ['09:01:51.196', '5410.29'],
    ['09:01:51.766', '5410.29'],
    ['09:01:52.136', '5410.29'],
    ['09:01:53.105', '5410.29'],
    ['09:01:53.838', '5410.29'],
    ['09:01:54.091', '5410.54'],
    ['09:01:54.827', '5410.54'],
    ['09:01:55.123', '5410.54'],
    ['09:01:55.708', '5410.54'],
    ['09:01:56.127', '5410.54'],
    ['09:01:56.681', '5410.54'],
    ['09:01:57.096', '5410.54'],
    ['09:01:58.139', '5410.54'],
    ['09:01:58.748', '5410.54'],
    ['09:01:59.098', '5410.83'],
    ['09:01:59.805', '5410.83'],
    ['09:02:00.200', '5410.83'],
    ['09:02:01.124', '5410.83'],
    ['09:02:31.172', '5414.15'],
    ['09:02:31.354', '5414.15'],
    ['09:02:31.733', '5414.15'],
    ['09:02:32.111', '5414.26'],
    ['09:02:33.032', '5414.26'],
    ['09:02:33.143', '5414.26'],
    ['09:02:33.922', '5414.26'],
    ['09:02:34.202', '5414.26'],
    ['09:02:35.037', '5414.26'],
    ['09:02:35.127', '5414.23'],
    ['09:02:36.045', '5414.23'],
    ['09:02:36.119', '5416.23'],
    ['09:02:36.754', '5416.23'],
    ['09:02:37.153', '5416.93'],
    ['09:02:37.850', '5416.93'],
    ['09:02:38.130', '5417.31'],
    ['09:02:38.870', '5417.31'],
    ['09:02:39.129', '5416.98'],
    ['09:02:39.860', '5416.98'],
    ['09:02:40.138', '5416.98'],
    ['09:02:40.927', '5416.98'],
    ['09:02:41.141', '5416.98'],
    ['09:02:42.088', '5416.98'],
    ['09:02:43.089', '5416.93'],
    ['09:03:00.136', '5416.28'],
    ['09:03:18.126', '5415.8'],
    ['09:03:19.109', '5415.8'],
    ['09:03:20.103', '5415.8'],
    ['09:07:00.194', '5413.73'],
    ['09:07:01.157', '5415.73']
  ]

  AVERAGE = [['09:00', 5411.59], ['09:01', 5410.72], ['09:02', 5415.30],
             ['09:03', 5415.92], ['09:07', 5414.73]]

  before(:each) do
    @group_array = GroupArray.new(DATA)
  end
  
  it "should return grouped array with average values" do
    result = @group_array.get_every_min
    result.length.should ==  AVERAGE.length
    result.should == AVERAGE
  end
  
end
